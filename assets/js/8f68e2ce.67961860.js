"use strict";(self.webpackChunkcogment_doc=self.webpackChunkcogment_doc||[]).push([[89],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>d});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),s=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=s(e.components);return r.createElement(c.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),m=s(t),d=a,h=m["".concat(c,".").concat(d)]||m[d]||u[d]||o;return t?r.createElement(h,l(l({ref:n},p),{},{components:t})):r.createElement(h,l({ref:n},p))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,l=new Array(o);l[0]=m;var i={};for(var c in n)hasOwnProperty.call(n,c)&&(i[c]=n[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var s=2;s<o;s++)l[s]=t[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5432:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>s});var r=t(3117),a=(t(7294),t(3905));const o={sidebar_position:5},l="Launch",i={unversionedId:"reference/cli/launch",id:"reference/cli/launch",title:"Launch",description:"Launch is a utility command meant to facilitate locally launching and shutting down an entire cogment project at once.",source:"@site/docs/reference/cli/launch.md",sourceDirName:"reference/cli",slug:"/reference/cli/launch",permalink:"/docs/reference/cli/launch",draft:!1,tags:[],version:"current",lastUpdatedAt:1678467496,formattedLastUpdatedAt:"3/10/2023",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"docSidebar",previous:{title:"Model Registry",permalink:"/docs/reference/cli/model-registry"},next:{title:"Python SDK",permalink:"/docs/reference/python"}},c={},s=[{value:"Command line",id:"command-line",level:2},{value:"launch.yaml",id:"launchyaml",level:2},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Variable substitution",id:"variable-substitution",level:2},{value:"Working folder",id:"working-folder",level:2}],p={toc:s};function u(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"launch"},"Launch"),(0,a.kt)("p",null,"Launch is a utility command meant to facilitate locally launching and shutting down an entire cogment project at once."),(0,a.kt)("p",null,"When launch is used, a set of processes will be launched to run in parallel, as described by a yaml file. Once any of these processes terminates, all other ones will be terminated as well."),(0,a.kt)("h2",{id:"command-line"},"Command line"),(0,a.kt)("p",null,"Launch is a command that takes a single parameter: a yaml file describing the processes to launch."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ cogment launch ./launch.yaml\n")),(0,a.kt)("h2",{id:"launchyaml"},"launch.yaml"),(0,a.kt)("p",null,"The launch yaml file consists of a single top-level object called ",(0,a.kt)("inlineCode",{parentName:"p"},"scripts"),"."),(0,a.kt)("p",null,"Each node under ",(0,a.kt)("inlineCode",{parentName:"p"},"scripts")," represents one of the processes to run. The processes can be given any name, which will serve to identify outputs related to that process."),(0,a.kt)("p",null,"Each process will run the contents of the ",(0,a.kt)("inlineCode",{parentName:"p"},"commands")," list in sequence (i.e. the next command will run when the previous terminates). Each command runs in an independent environment (e.g. environment variables set by one command will not be seen by the others)."),(0,a.kt)("p",null,"E.g.:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'scripts:\n    process_a:\n        commands:\n            - ["retrieve_db.sh"]\n            - ["python", "env/main.py"]\n\n    process_b:\n        commands:\n            - ["cogment", "service", "orchestrator"]\n')),(0,a.kt)("h2",{id:"environment-variables"},"Environment Variables"),(0,a.kt)("p",null,"You can set environment variables using the ",(0,a.kt)("inlineCode",{parentName:"p"},"environment")," node of the process. These will be part of the environment of all commands of the process."),(0,a.kt)("p",null,"E.g:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'scripts:\n    orchestrator:\n        environment:\n            COGMENT_ORCHESTRATOR_ACTOR_PORT: 9000\n            COGMENT_LIFECYCLE_PORT: 9000\n        commands:\n            - ["cogment", "services", "orchestrator"]\n')),(0,a.kt)("h2",{id:"variable-substitution"},"Variable substitution"),(0,a.kt)("p",null,"You can substitute environment variables using ",(0,a.kt)("inlineCode",{parentName:"p"},"{{.ENV_VAR}}")," anywhere within the grammar of the ",(0,a.kt)("inlineCode",{parentName:"p"},"commands")," list. Environment variables set in the ",(0,a.kt)("inlineCode",{parentName:"p"},"environment")," node will also be available for substitution."),(0,a.kt)("p",null,"E.g.:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'scripts:\n    say_hi:\n        environment:\n            QUESTION: "How are you?"\n        commands:\n            - ["echo", "Hello, {{.USER}}. {{.QUESTION}}"]\n')),(0,a.kt)("h2",{id:"working-folder"},"Working folder"),(0,a.kt)("p",null,"By default, the current working folder is set to the folder containing the launch script. You can override that behavior with the ",(0,a.kt)("inlineCode",{parentName:"p"},"dir")," node for each process."),(0,a.kt)("p",null,"E.g.:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'scripts:\n    actor_alpha:\n        dir: ./actors/alpha\n        commands:\n            - ["python", "main.py"]\n')))}u.isMDXComponent=!0}}]);