"use strict";(self.webpackChunkcogment_doc=self.webpackChunkcogment_doc||[]).push([[749],{3905:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>m});var n=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var c=n.createContext({}),p=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},d=function(e){var t=p(e.components);return n.createElement(c.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,o=e.originalType,c=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=p(r),m=i,h=u["".concat(c,".").concat(m)]||u[m]||s[m]||o;return r?n.createElement(h,a(a({ref:t},d),{},{components:r})):n.createElement(h,a({ref:t},d))}));function m(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=r.length,a=new Array(o);a[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:i,a[1]=l;for(var p=2;p<o;p++)a[p]=r[p];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},9030:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>s,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=r(3117),i=(r(7294),r(3905));const o={title:"Directory",sidebar_position:4},a="Directory Client",l={unversionedId:"reference/cli/directory_client",id:"reference/cli/directory_client",title:"Directory",description:"The Directory Client is a utility to manually access (through the command line interface) the Directory service. It can be used to register, deregister (remove) and inquire services.",source:"@site/docs/reference/cli/directory_client.md",sourceDirName:"reference/cli",slug:"/reference/cli/directory_client",permalink:"/docs/reference/cli/directory_client",draft:!1,tags:[],version:"current",lastUpdatedAt:1663347759,formattedLastUpdatedAt:"9/16/2022",sidebarPosition:4,frontMatter:{title:"Directory",sidebar_position:4},sidebar:"docSidebar",previous:{title:"Trial Datastore",permalink:"/docs/reference/cli/trial-datastore"},next:{title:"Model Registry",permalink:"/docs/reference/cli/model-registry"}},c={},p=[{value:"Common Options",id:"common-options",level:2},{value:"<code>endpoint</code>",id:"endpoint",level:3},{value:"<code>auth_token</code>",id:"auth_token",level:3},{value:"Directory Client Register",id:"directory-client-register",level:2},{value:"Output",id:"output",level:3},{value:"Command line",id:"command-line",level:3},{value:"<code>protocol</code>",id:"protocol",level:4},{value:"<code>host</code>",id:"host",level:4},{value:"<code>port</code>",id:"port",level:4},{value:"<code>ssl_required</code>",id:"ssl_required",level:4},{value:"<code>type</code>",id:"type",level:4},{value:"<code>permanent</code>",id:"permanent",level:4},{value:"<code>properties</code>",id:"properties",level:4},{value:"Directory Client Deregister",id:"directory-client-deregister",level:2},{value:"Output",id:"output-1",level:3},{value:"Command line",id:"command-line-1",level:3},{value:"<code>service_id</code>",id:"service_id",level:4},{value:"<code>secret</code>",id:"secret",level:4},{value:"Directory Client Inquire",id:"directory-client-inquire",level:2},{value:"Output",id:"output-2",level:3},{value:"Command line",id:"command-line-2",level:3},{value:"<code>service_id</code>",id:"service_id-1",level:4},{value:"<code>type</code>",id:"type-1",level:4},{value:"<code>properties</code>",id:"properties-1",level:4}],d={toc:p};function s(e){let{components:t,...r}=e;return(0,i.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"directory-client"},"Directory Client"),(0,i.kt)("p",null,"The Directory Client is a utility to manually access (through the command line interface) the ",(0,i.kt)("a",{parentName:"p",href:"/docs/reference/cli/directory#directory"},"Directory service"),". It can be used to register, deregister (remove) and inquire services."),(0,i.kt)("h2",{id:"common-options"},"Common Options"),(0,i.kt)("p",null,"All directory client services have these options in common."),(0,i.kt)("h3",{id:"endpoint"},(0,i.kt)("inlineCode",{parentName:"h3"},"endpoint")),(0,i.kt)("p",null,"The grpc protocol endpoint where to find the Directory."),(0,i.kt)("p",null,"Can be specified as:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"a command line option, e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"--endpoint"),","),(0,i.kt)("li",{parentName:"ul"},"an environment variable, e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"COGMENT_DIRECTORY_ENDPOINT"),","),(0,i.kt)("li",{parentName:"ul"},'its default value is "grpc://localhost:9005".')),(0,i.kt)("h3",{id:"auth_token"},(0,i.kt)("inlineCode",{parentName:"h3"},"auth_token")),(0,i.kt)("p",null,"The authentication token for the service(s) in the Directory."),(0,i.kt)("p",null,"Can be specified as:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"a command line option, e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"--auth_token"),","),(0,i.kt)("li",{parentName:"ul"},"an environment variable, e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"COGMENT_DIRECTORY_AUTHENTICATION_TOKEN"),","),(0,i.kt)("li",{parentName:"ul"},'empty default value ("").')),(0,i.kt)("h2",{id:"directory-client-register"},"Directory Client Register"),(0,i.kt)("p",null,"The registration client is used to register (add) a service to the Directory."),(0,i.kt)("p",null,"E.g.:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'$ cogment client directory register --endpoint="grpc://dir:9005" --host="act" --port=9030 --type="actor" --properties="__actor_class=reporter,intensity=5,high_profile"\n\nService ID [7722934920723]  Secret [ZGi6GLe]\n')),(0,i.kt)("h3",{id:"output"},"Output"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"If successful, the output is the service ID of the newly registered service, and its secret string. The secret string is necessary to deregister the service.\n")),(0,i.kt)("h3",{id:"command-line"},"Command line"),(0,i.kt)("h4",{id:"protocol"},(0,i.kt)("inlineCode",{parentName:"h4"},"protocol")),(0,i.kt)("p",null,"The protocol (URL scheme) for the service endpoint. Can only be ",(0,i.kt)("inlineCode",{parentName:"p"},"grpc")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"cogment"),". Default: ",(0,i.kt)("inlineCode",{parentName:"p"},"grpc"),"."),(0,i.kt)("h4",{id:"host"},(0,i.kt)("inlineCode",{parentName:"h4"},"host")),(0,i.kt)("p",null,"The host for the service endpoint."),(0,i.kt)("h4",{id:"port"},(0,i.kt)("inlineCode",{parentName:"h4"},"port")),(0,i.kt)("p",null,"The TCP port for the service endpoint."),(0,i.kt)("h4",{id:"ssl_required"},(0,i.kt)("inlineCode",{parentName:"h4"},"ssl_required")),(0,i.kt)("p",null,"A boolean value (",(0,i.kt)("inlineCode",{parentName:"p"},"true"),"/",(0,i.kt)("inlineCode",{parentName:"p"},"false"),") to indicate if SSL (encryption) is required to access the service. Default: ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),"."),(0,i.kt)("h4",{id:"type"},(0,i.kt)("inlineCode",{parentName:"h4"},"type")),(0,i.kt)("p",null,"The service type. Can be ",(0,i.kt)("inlineCode",{parentName:"p"},"actor"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"environment"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"prehook"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"datalog"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"lifecycle"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"actservice"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"datastore"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"modelregistry")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"other"),".\nThese are the same keywords used as ",(0,i.kt)("inlineCode",{parentName:"p"},"paths")," in Cogment ",(0,i.kt)("a",{parentName:"p",href:"/docs/reference/parameters#discovery-path"},"discovery endpoints"),"."),(0,i.kt)("h4",{id:"permanent"},(0,i.kt)("inlineCode",{parentName:"h4"},"permanent")),(0,i.kt)("p",null,"A boolean value (",(0,i.kt)("inlineCode",{parentName:"p"},"true"),"/",(0,i.kt)("inlineCode",{parentName:"p"},"false"),") to indicate if the service is to stay permanently in the directory (until explicitly deregistered). Permanent services are not checked for health or lifetime limits. Permanent services also get updated instead of being duplicated. Default: ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),"."),(0,i.kt)("h4",{id:"properties"},(0,i.kt)("inlineCode",{parentName:"h4"},"properties")),(0,i.kt)("p",null,'The properties to be associated with the service. In the form of "name=value,name=value" where the value is optional.'),(0,i.kt)("p",null,"Also see ",(0,i.kt)("a",{parentName:"p",href:"/docs/reference/parameters#discover-host"},"special properties")," used by Cogment."),(0,i.kt)("h2",{id:"directory-client-deregister"},"Directory Client Deregister"),(0,i.kt)("p",null,"The deregistration client is used to deregister (remove/delete) a service from the Directory."),(0,i.kt)("p",null,"E.g.:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'$ cogment client directory deregister --endpoint="grpc://dir:9005" --service_id=7722934920723 --secret="ZGi6GLe"\n')),(0,i.kt)("h3",{id:"output-1"},"Output"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"If successful, no output is produced.\n")),(0,i.kt)("h3",{id:"command-line-1"},"Command line"),(0,i.kt)("h4",{id:"service_id"},(0,i.kt)("inlineCode",{parentName:"h4"},"service_id")),(0,i.kt)("p",null,"The ID of the service to remove."),(0,i.kt)("h4",{id:"secret"},(0,i.kt)("inlineCode",{parentName:"h4"},"secret")),(0,i.kt)("p",null,"The secret string that was returned when the service was registered."),(0,i.kt)("h2",{id:"directory-client-inquire"},"Directory Client Inquire"),(0,i.kt)("p",null,'The inquiry client is used to inquire (find) services in the Directory. Note that if services are not found (or the authentication token does not match), an empty list is returned, but there is no "error".'),(0,i.kt)("p",null,"E.g.:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'$ cogment client directory inquire --endpoint="grpc://dir:9005" --type="actor" --properties="intensity=5,high_profile"\n\n[11] Services found\nService ID [7722934920723]\n        Endpoint [grpc://act:9030] SSL required [false]\n        Type [actor]\n        [__registration_source] = [Cogment-Command_Line]\n        [__version] = [2.8.0]\n        [high_profile] = []\n        [intensity] = [5]\n        [__actor_class] = [reporter]\n')),(0,i.kt)("h3",{id:"output-2"},"Output"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"If successful, the number of services found and the details of each service is output.\n")),(0,i.kt)("h3",{id:"command-line-2"},"Command line"),(0,i.kt)("h4",{id:"service_id-1"},(0,i.kt)("inlineCode",{parentName:"h4"},"service_id")),(0,i.kt)("p",null,"The ID of the service to find. If this is provided, the ",(0,i.kt)("inlineCode",{parentName:"p"},"type")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"properties")," options cannot be used."),(0,i.kt)("h4",{id:"type-1"},(0,i.kt)("inlineCode",{parentName:"h4"},"type")),(0,i.kt)("p",null,"The service type to find. Can be ",(0,i.kt)("inlineCode",{parentName:"p"},"actor"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"environment"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"prehook"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"datalog"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"lifecycle"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"actservice"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"datastore"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"modelregistry")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"other"),".\nThese are the same keywords used as ",(0,i.kt)("inlineCode",{parentName:"p"},"paths")," in Cogment ",(0,i.kt)("a",{parentName:"p",href:"/docs/reference/parameters#discovery-path"},"discovery endpoints"),"."),(0,i.kt)("p",null,"If this is provided, the ",(0,i.kt)("inlineCode",{parentName:"p"},"service_id")," option cannot be used."),(0,i.kt)("h4",{id:"properties-1"},(0,i.kt)("inlineCode",{parentName:"h4"},"properties")),(0,i.kt)("p",null,'The properties associated with the service to find. In the form of "name=value,name=value" where the value is optional. All properties must match (in name and value) the properties of the service for a match to occur.'),(0,i.kt)("p",null,"If this is provided, the ",(0,i.kt)("inlineCode",{parentName:"p"},"service_id")," option cannot be used."))}s.isMDXComponent=!0}}]);